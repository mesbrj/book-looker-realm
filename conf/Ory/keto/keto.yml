version: v0.11.1

# Keto Configuration for book-looker-realm fine-grained authorization
serve:
  read:
    port: 4466
    host: 0.0.0.0
    cors:
      enabled: true
      allowed_origins:
        - "*"
    tls:
      # Ready for HTTPS when needed
      enabled: false
      cert:
        path: /etc/certs/server.crt
      key:
        path: /etc/certs/server.key
  write:
    port: 4467
    host: 0.0.0.0
    cors:
      enabled: true
      allowed_origins:
        - "*"
    tls:
      enabled: false
      cert:
        path: /etc/certs/server.crt
      key:
        path: /etc/certs/server.key
  opl_syntax:
    port: 4468
    host: 0.0.0.0
    tls:
      enabled: false
      cert:
        path: /etc/certs/server.crt
      key:
        path: /etc/certs/server.key

dsn: postgres://ory:ory-secret@postgres:5432/keto?sslmode=disable

# HTTP client configuration for external calls
http:
  tls:
    # Force trust of your self-signed CA
    verify_certificates: true
    ca_cert_file: /etc/certs/ca.crt
    # Additional security settings
    min_version: "1.2"
    max_version: "1.3"
  timeout:
    read: 30s
    write: 30s
    idle: 120s
    tls:
      enabled: false
      cert:
        path: /etc/certs/server.crt
      key:
        path: /etc/certs/server.key

# Permission namespaces for book-looker-realm
namespaces:
  - name: documents
  - name: catalogs  
  - name: s3_buckets
  - name: kafka_topics
  - name: kerberos_principals

log:
  level: debug
  format: json
